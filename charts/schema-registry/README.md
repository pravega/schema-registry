<!--

  Copyright (c) Dell Inc., or its subsidiaries. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

-->

# Schema Registry Helm Chart

Installs [Pravega Schema Registry](https://github.com/pravega/schema-registry) atop Kubernetes.

## Introduction

This chart bootstraps a [schema registry](https://github.com/pravega/schema-registry) deployment on a [Kubernetes](http://kubernetes.io) cluster using the [Helm](https://helm.sh) package manager.

## Prerequisites
  - Kubernetes 1.15+
  - Helm 3+

## Installing the Chart

To install the chart with the release name `my-release`:

```
$ helm install my-release charts/schema-registry
```

This command deploys schema registry on the Kubernetes cluster with default configuration. The [configuration](#configuration) section lists the parameters that can be configured during installation.

## Uninstalling the Chart

To uninstall/delete the `my-release` deployment:

```
$ helm uninstall my-release
```

This command removes all the Kubernetes components associated with the chart and deletes the release.

## Configuration

The following table lists the configurable parameters of the schema registry chart and their default values.

| Parameter | Description | Default |
| ----- | ----------- | ------ |
| `replicas` | Number of replicas | `2` |
| `image.repository` | Repository for schema registry image | `pravega/schema-registry` |
| `image.tag` | Tag for schema registry image | `0.0.1` |
| `image.pullPolicy` | Pull policy for schema registry image | `IfNotPresent` |
| `serviceAccount.create` | Whether to create a service account | `true` |
| `serviceAccount.name` | Name of the service account | `schema-registry` |
| `serviceAccount.annotations` | Annotations to be added to the service account | |
| `service.type` | Schema registry service type | `LoadBalancer` |
| `service.port` | Schema registry service port | `9092` |
| `ingress.enabled` | Whether to expose as an ingress resource | `false` |
| `ingress.path` | Path for the ingress | `/` |
| `ingress.annotations` | Annotations for the ingress | `{}` |
| `ingress.hosts` | List of hosts for the ingress | `[schema-registry.pravega.com]` |
| `ingress.tls` | TLS configuration for the ingress | `[]` |
| `controllerUri` | URL of the Pravega Controller service | `tcp://localhost:9090` |
| `storeType` | Type of store to be used | `Pravega` |
| `authentication.enabled` | Whether to enable authentication and authorization | `false` |
| `authentication.passwordAuthSecret` | Name of the secret generated by the user from the userPasswordFile | |
| `authentication.userPasswordFile` | Path of the file containing user credentials and ACLs, for the PasswordAuthHandler | |
| `authentication.tokenSigningKey` | The key used for signing the delegation tokens | |
| `tls.enabled` | Whether to enable TLS | `false` |
| `tls.secret` | Name of the secret generated by the user from the tls certFile, trustStore, keyFile and keyPasswordFile | |
| `tls.certFile` | Path of the X.509 PEM-encoded server certificate file for the service | |
| `tls.keyFile` | Path of the PEM-encoded private key file for the service | |
| `tls.keyPasswordFile` | Path of the PEM-encoded private key password file for the service | |
